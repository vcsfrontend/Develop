<div class="my-4 page-header-breadcrumb d-flex align-items-center justify-content-between flex-wrap gap-2">
    <div>
        <h1 class="page-title fw-medium fs-18 mb-2">Settings</h1>
        <div class="">
            <nav>
                <ol class="breadcrumb mb-0">
                    <li class="breadcrumb-item"><a href="javascript:void(0);">dashboard</a></li>
                    <li class="breadcrumb-item active" aria-current="page">settings</li>
                </ol>
            </nav>
        </div>
    </div>
</div>
<div class="card shadow" style="border-radius: 32px;">
    <div class="card-header bg-white p-2 px-3">
        <div class="row">
            <div class="col-xl-6">
                <h4>Signup Form</h4>
            </div>
            <div class="col-xl-6">
                <div class="float-end" *ngIf="!isAddEdt">
                    <button type="button" class="btn btn-sm btn-primary text-center"
                        (click)="isAddEdt=!isAddEdt;aeTyp='a';onRst()">Add
                    </button>
                </div>
            </div>
        </div>
    </div>
    <div class="card-body p-2">
        <div class="row">
            <div *ngIf="!isAddEdt">
                <div class="col-md-12">
                    <div class="row mb-2">

                    </div>
                </div>
                <div class="card-body p-0">
                    <div class="mat-elevation-z8">
                        <mat-form-field class="mt-2 p-2">
                            <mat-label>Filter</mat-label>
                            <input matInput (keyup)="applyFilter($event)" #input>
                        </mat-form-field>
                        <div class="table-responsive">
                            <table mat-table [dataSource]="dataSource">
                                <!-- Position Column -->
                                <ng-container matColumnDef="slNo">
                                    <th mat-header-cell *matHeaderCellDef> S.No. </th>
                                    <td mat-cell *matCellDef="let element; let i = index"> {{getSNo(i)}} </td>
                                </ng-container>
                                <!-- Name Column -->
                                <ng-container matColumnDef="firstName">
                                    <th mat-header-cell *matHeaderCellDef> First Name </th>
                                    <td mat-cell *matCellDef="let element"> {{element.firstName}} </td>
                                </ng-container>
                                <!-- Weight Column -->
                                <ng-container matColumnDef="lastName">
                                    <th mat-header-cell *matHeaderCellDef> Last Name </th>
                                    <td mat-cell *matCellDef="let element"> {{element.lastName}} </td>
                                </ng-container>
                                <!-- Symbol Column -->
                                <ng-container matColumnDef="email">
                                    <th mat-header-cell *matHeaderCellDef> Email </th>
                                    <td mat-cell *matCellDef="let element"> {{element.email}} </td>
                                </ng-container>
                                <ng-container matColumnDef="dateOfBirth">
                                    <th mat-header-cell *matHeaderCellDef> Date of Birth </th>
                                    <td mat-cell *matCellDef="let element"> {{element.dob}} </td>
                                </ng-container>
                                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                            </table>
                        </div>
                        <mat-paginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons
                            aria-label="Select page of periodic elements">
                        </mat-paginator>
                    </div>
                </div>
            </div>
            <div *ngIf="isAddEdt">
                <div class="container mt-2 mb-2">
                    <!-- <form [formGroup]="userForm" (ngSubmit)="onSubmit()">
                        <div class="row">
                            <div class="col-xl-4 col-lg-4 col-md-4 col-sm-12 mb-2">
                                <p class="mb-2 text-muted">First Name</p>
                                <input type="text" class="form-control form-control-lg bg-light p-2 font-weight-bold bg-opacity-25 border border-dark" id="signup-firstname"
                                    placeholder="First name" formControlName="firstName" appShowCodeContent
                                    onkeypress='return ((event.charCode >= 65 && event.charCode <= 90) || (event.charCode >= 97 && 
                                    event.charCode <= 122) || event.charCode == 8 || event.charCode == 32)'
                                    [ngClass]="{ 'is-invalid': submitted && f['firstName'].errors }" maxlength="50">
                                <div *ngIf="submitted && f['firstName'].errors" class="invalid-feedback">
                                    <div *ngIf="f['firstName'].errors['required']">First name is required</div>
                                </div>
                            </div>
                            <div class="col-xl-4 col-lg-4 col-md-4 col-sm-12 mb-2">
                                <p class="mb-2 text-muted">Last Name</p>
                                <input type="text" class="form-control form-control-lg bg-light p-2 font-weight-bold bg-opacity-25 border border-dark" id="signup-lastname"
                                    placeholder="Last name" formControlName="lastName" appShowCodeContent
                                    onkeypress='return ((event.charCode >= 65 && event.charCode <= 90) || (event.charCode >= 97 && 
                                    event.charCode <= 122) || event.charCode == 8 ||event.charCode == 32)'
                                    [ngClass]="{ 'is-invalid': submitted && f['lastName'].errors }" maxlength="50">
                                <div *ngIf="submitted && f['lastName'].errors" class="invalid-feedback">
                                    <div *ngIf="f['lastName'].errors['required']">Last name is required</div>
                                </div>
                            </div>
                            <div class="col-xl-4 col-lg-4 col-md-4 col-sm-12 mb-2">
                                <label for="signup-dob" class="form-label text-default"><strong>Date of birth</strong><span class="text-danger"> *</span></label>
                                <div class="input-group">
                                    <div class="input-group-text text-muted bg-light pl-4 font-weight-bold bg-opacity-25 border border-dark"> <i class="ri-calendar-line"></i> </div>
                                    <input class="form-control form-control-lg bg-light p-2 font-weight-bold bg-opacity-25 border border-dark" placeholder="Choose date" type="text" mwlFlatpickr
                                    formControlName="dob" [maxDate]="todayDt">
                                </div>
                            </div>
                            <div class="col-xl-4 col-lg-4 col-md-4 col-sm-12 mb-2">
                                <p class="mb-2 text-muted">Email</p>
                                <input type="text" class="form-control form-control-lg bg-light p-2 font-weight-bold bg-opacity-25 border border-dark " id="signup-email" 
                                    placeholder="email" onkeypress='return ((event.charCode >= 48 && event.charCode <= 57) || 
                                    (event.charCode >= 64 && event.charCode <= 90) || (event.charCode >= 97 && 
                                    event.charCode <= 122) || event.charCode == 8 || event.charCode == 46 || event.charCode == 95)'
                                    formControlName="email" appShowCodeContent [(ngModel)] = 'mailId'
                                    [ngClass]="{ 'is-invalid': submitted && f['email'].errors }" >
                                <div *ngIf="submitted && f['email'].errors" class="invalid-feedback">
                                    <span *ngIf="f['email'].errors['required']">Email is required.</span>
                                    <span *ngIf="f['email'].errors['email']">Invalid email address.</span>
                                </div>
                            </div>
                            <div class="col-xl-4 col-lg-4 col-md-4 col-sm-12 mb-2">
                                <label for="input-label" class="form-label">Password</label>
                               
                                <div class="position-relative">
                                    <input type="password" class="form-control form-control-lg bg-light p-2 font-weight-bold bg-opacity-25 border border-dark" id="signup-password"
                                        placeholder="password" [type]="showPassword ? 'text' : 'password'" autocomplete
                                        formControlName="password" appShowCodeContent [(ngModel)]="paswrd"
                                        onkeypress='return ((event.charCode >= 33 && event.charCode <= 127) || event.charCode == 8)' 
                                        (copy)="preventCopyPaste($event)" (cut)="preventCopyPaste($event)" (paste)="preventCopyPaste($event)"
                                        maxlength="16" [ngClass]="{ 'is-invalid': submitted && f['password'].errors }">
                                        <span class="checkmark" *ngIf="isPasswordValid">&#10003;</span>
                                    <a href="javascript:void(0);" class="show-password-button text-muted"
                                        (click)="createpassword()" id="button-addon2"><i class="ri-eye-{{toggleClass}} align-middle"></i></a>
                                    <div class="message" [style.color]="passwordStrengthColor">
                                        {{ passwordStrengthMessage }}
                                    </div>
                                    <div *ngIf="submitted && f['password'].errors || f['password'].touched"
                                        class="invalid-feedback">
                                        <div *ngIf="isPasswrd && f['password'].errors?.['required']">Password is required.</div>
                                        <div *ngIf="isPassValid && f['password'].errors?.['invalidPassword']">
                                            Password must be at least 8 characters long, contain one Special character at least one uppercase
                                            letter, one lowercase letter and one number.
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xl-4 col-lg-4 col-md-4 col-sm-12 mb-2">
                                <label for="input-label" class="form-label">Confirm Password</label>
                                
                                <div class="position-relative">
                                    <input type="password" class="form-control form-control-lg bg-light p-2 font-weight-bold bg-opacity-25 border border-dark"
                                        id="signup-confirmpassword" placeholder="confirm password" formControlName="confirmPassword"
                                        [type]="showPassword1 ? 'text' : 'password'" autocomplete maxlength="16"
                                        (copy)="preventCopyPaste($event)" (cut)="preventCopyPaste($event)" (paste)="preventCopyPaste($event)"
                                        onkeypress='return ((event.charCode >= 33 && event.charCode <= 127) || event.charCode == 8)' 
                                        [(ngModel)]="cnfmPaswrd" appShowCodeContent [ngClass]="{ 'is-invalid': submitted && f['confirmPassword'].errors }">
                                    <span class="checkmark" *ngIf="isCnfmPwd">&#10003;</span>
                                    <a href="javascript:void(0);" class="show-password-button text-muted"
                                        (click)="createpassword1()" id="button-addon21"><i
                                            class="ri-eye-{{toggleClass1}} align-middle"></i></a>
                                    <div class="message" [style.color]="confirmPasswordStrengthColor">
                                        {{ confirmPasswordStrengthMessage }}
                                    </div>
                                    <div *ngIf="submitted && f['confirmPassword'].errors" class="invalid-feedback">
                                        <div *ngIf="f['confirmPassword'].errors['required']">Confirm Password is required</div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xl-4 col-lg-4 col-md-4 col-sm-12 mb-2">
                                <label for="input-label" class="form-label">Phone Number</label>
                                <input type="text" class="form-control form-control-lg bg-light p-2 font-weight-bold bg-opacity-25 border border-dark" id="signup-mobile"
                                    placeholder="mobile" formControlName="phoneNumber" maxlength="10"
                                    onkeypress='return ((event.charCode >= 48 && event.charCode <= 57) || 
                                    event.charCode == 8)' (copy)="preventCopyPaste($event)" (cut)="preventCopyPaste($event)" (paste)="preventCopyPaste($event)" 
                                    [ngClass]="{ 'is-invalid': submitted && f['phoneNumber'].errors }">
                                <div *ngIf="submitted && f['phoneNumber'].errors" class="invalid-feedback">
                                    <div *ngIf="f['phoneNumber'].errors['required']">Phone Number is required</div>
                                </div>
                            </div>
                            <div class="col-xl-4 col-lg-4 col-md-4 col-sm-12 mb-2">
                                <label for="role-id" class="form-label text-default">Tool ID<sup>*</sup></label><br>
                                <mat-form-field>
                                    <mat-select formControlName="tools" multiple>
                                    @for (topping of toolsList; track topping) {
                                        <mat-option [value]="topping">{{topping}}</mat-option>
                                    }
                                    </mat-select>
                                    <mat-error *ngIf="f['tools'].errors?.['required']">
                                        Please select at least one tool.
                                    </mat-error>
                                </mat-form-field>
                                
                            </div>
                            <div class="col-xl-4 col-lg-4 col-md-4 col-sm-12 mb-2">
                                <label for="input-label" class="form-label">Country</label>
                                <select class="form-select form-select-lg bg-light p-2 font-weight-bold bg-opacity-25 border border-dark" id="country" formControlName="country" 
                                    [ngClass]="{ 'is-invalid': submitted && f['country'].errors }">
                                    <option value="" disabled selected>Select</option>
                                    <option value="{{c.country}}" *ngFor="let c of countryLst">{{c.country}} (+{{ c.code }})</option>
                                </select>
                                <div *ngIf="submitted && f['country'].errors" class="invalid-feedback">
                                    <div *ngIf="f['country'].errors['required']">Country is required</div>
                                </div>
                            </div>
                        </div>
                    </form> -->

                    <form [formGroup]="userForm" (ngSubmit)="onSubmit()" class="bg-light p-2 text-white bg-opacity-25">
                        <div class="row gy-2">
                            <div class="col-xl-4">
                                <label for="signup-firstname" class="form-label text-default"><strong>First
                                        Name</strong><span class="text-danger"> *</span></label>
                                <input type="text"
                                    class="form-control form-control-lg bg-light p-2 font-weight-bold bg-opacity-25 border border-dark"
                                    id="signup-firstname" placeholder="First name" formControlName="firstName"
                                    appShowCodeContent onkeypress='return ((event.charCode >= 65 && event.charCode <= 90) || (event.charCode >= 97 && 
                                    event.charCode <= 122) || event.charCode == 8 || event.charCode == 32)'
                                    [ngClass]="{ 'is-invalid': submitted && f['firstName'].errors }" maxlength="50">
                                <div *ngIf="submitted && f['firstName'].errors" class="invalid-feedback">
                                    <div *ngIf="f['firstName'].errors['required']">First name is required</div>
                                </div>
                            </div>
                            <div class="col-xl-4">
                                <label for="signup-lastname" class="form-label text-default"><strong>Last
                                        Name</strong><span class="text-danger"> *</span></label>
                                <input type="text"
                                    class="form-control form-control-lg bg-light p-2 font-weight-bold bg-opacity-25 border border-dark"
                                    id="signup-lastname" placeholder="Last name" formControlName="lastName"
                                    appShowCodeContent onkeypress='return ((event.charCode >= 65 && event.charCode <= 90) || (event.charCode >= 97 && 
                                    event.charCode <= 122) || event.charCode == 8 ||event.charCode == 32)'
                                    [ngClass]="{ 'is-invalid': submitted && f['lastName'].errors }" maxlength="50">
                                <div *ngIf="submitted && f['lastName'].errors" class="invalid-feedback">
                                    <div *ngIf="f['lastName'].errors['required']">Last name is required</div>
                                </div>
                            </div>
                            <div class="col-xl-4">
                                <label for="signup-dob" class="form-label text-default"><strong>Date of
                                        birth</strong><span class="text-danger"> *</span></label>
                                <div class="input-group">
                                    <div
                                        class="input-group-text text-muted bg-light pl-4 font-weight-bold bg-opacity-25 border border-dark">
                                        <i class="ri-calendar-line"></i>
                                    </div>
                                    <input
                                        class="form-control form-control-lg bg-light p-2 font-weight-bold bg-opacity-25 border border-dark"
                                        placeholder="Choose date" type="date" formControlName="dob"
                                        [(ngModel)]="todayDate" [max]="maxDate" [min]="minDate">
                                </div>
                            </div>
                            <div class="col-xl-4">
                                <label for="signup-email" class="form-label text-default"><strong>Email</strong><span
                                        class="text-danger"> *</span></label>
                                <input type="text"
                                    class="form-control form-control-lg bg-light p-2 font-weight-bold bg-opacity-25 border border-dark "
                                    id="signup-email" placeholder="email"
                                    onkeypress='return ((event.charCode >= 48 && event.charCode <= 57) || 
                                    (event.charCode >= 64 && event.charCode <= 90) || (event.charCode >= 97 && 
                                    event.charCode <= 122) || event.charCode == 8 || event.charCode == 46 || event.charCode == 95)' formControlName="email"
                                    appShowCodeContent [(ngModel)]='mailId'
                                    [ngClass]="{ 'is-invalid': submitted && f['email'].errors }">
                                <div *ngIf="submitted && f['email'].errors" class="invalid-feedback">
                                    <span *ngIf="f['email'].errors['required']">Email is required.</span>
                                    <span *ngIf="f['email'].errors['email']">Invalid email address.</span>
                                </div>
                            </div>

                            <div class="col-xl-4">
                                <label for="signup-password"
                                    class="form-label text-default"><strong>Password</strong><span class="text-danger">
                                        *</span></label>
                                <div class="position-relative">
                                    <input type="password"
                                        class="form-control form-control-lg bg-light p-2 font-weight-bold bg-opacity-25 border border-dark"
                                        id="signup-password" placeholder="password"
                                        [type]="showPassword ? 'text' : 'password'" autocomplete
                                        formControlName="password" appShowCodeContent [(ngModel)]="paswrd"
                                        onkeypress='return ((event.charCode >= 33 && event.charCode <= 127) || event.charCode == 8)'
                                        (copy)="preventCopyPaste($event)" (cut)="preventCopyPaste($event)"
                                        (paste)="preventCopyPaste($event)" maxlength="16"
                                        [ngClass]="{ 'is-invalid': submitted && f['password'].errors }">
                                    <span class="checkmark" *ngIf="isPasswordValid">&#10003;</span>
                                    <a href="javascript:void(0);" class="show-password-button text-muted"
                                        (click)="createpassword()" id="button-addon2"><i
                                            class="ri-eye-{{toggleClass}} align-middle"></i></a>
                                    <div class="message" [style.color]="passwordStrengthColor">
                                        {{ passwordStrengthMessage }}
                                    </div>
                                    <div *ngIf="submitted && f['password'].errors || f['password'].touched"
                                        class="invalid-feedback">
                                        <div *ngIf="isPasswrd && f['password'].errors?.['required']">Password is
                                            required.</div>
                                        <div *ngIf="isPassValid && f['password'].errors?.['invalidPassword']">
                                            Password must be at least 8 characters long, contain one Special character
                                            at least one uppercase
                                            letter, one lowercase letter and one number.
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-xl-4">
                                <label for="signup-confirmpassword" class="form-label text-default"><strong>Confirm
                                        Password</strong><span class="text-danger"> *</span></label>
                                <div class="position-relative">
                                    <input type="password"
                                        class="form-control form-control-lg bg-light p-2 font-weight-bold bg-opacity-25 border border-dark"
                                        id="signup-confirmpassword" placeholder="confirm password"
                                        formControlName="confirmPassword" [type]="showPassword1 ? 'text' : 'password'"
                                        autocomplete maxlength="16" (copy)="preventCopyPaste($event)"
                                        (cut)="preventCopyPaste($event)" (paste)="preventCopyPaste($event)"
                                        onkeypress='return ((event.charCode >= 33 && event.charCode <= 127) || event.charCode == 8)'
                                        [(ngModel)]="cnfmPaswrd" appShowCodeContent
                                        [ngClass]="{ 'is-invalid': submitted && f['confirmPassword'].errors }">
                                    <span class="checkmark" *ngIf="isCnfmPwd">&#10003;</span>
                                    <a href="javascript:void(0);" class="show-password-button text-muted"
                                        (click)="createpassword1()" id="button-addon21"><i
                                            class="ri-eye-{{toggleClass1}} align-middle"></i></a>
                                    <div class="message" [style.color]="confirmPasswordStrengthColor">
                                        {{ confirmPasswordStrengthMessage }}
                                    </div>
                                    <div *ngIf="submitted && f['confirmPassword'].errors" class="invalid-feedback">
                                        <div *ngIf="f['confirmPassword'].errors['required']">Confirm Password is
                                            required</div>
                                    </div>
                                </div>
                            </div>
                            <!-- <div class="col-xl-4">
                                <label for="signup-mobile" class="form-label text-default"><strong>Phone Number</strong><span class="text-danger"> *</span></label>
                                <input type="text" class="form-control form-control-lg bg-light p-2 font-weight-bold bg-opacity-25 border border-dark" id="signup-mobile"
                                    placeholder="mobile" formControlName="phoneNumber" maxlength="10"
                                    onkeypress='return ((event.charCode >= 48 && event.charCode <= 57) || 
                                    event.charCode == 8)' (copy)="preventCopyPaste($event)" (cut)="preventCopyPaste($event)" (paste)="preventCopyPaste($event)" 
                                    [ngClass]="{ 'is-invalid': submitted && f['phoneNumber'].errors }">
                                <div *ngIf="submitted && f['phoneNumber'].errors" class="invalid-feedback">
                                    <div *ngIf="f['phoneNumber'].errors['required']">Phone Number is required</div>
                                </div>
                            </div> -->
                            <div class="col-xl-4">
                                <label for="role-id" class="form-label text-default"><strong>Tool ID</strong><span
                                        class="text-danger"> *</span></label>
                                <br>
                                <mat-form-field>
                                    <mat-select formControlName="tools" multiple>
                                        @for (topping of toolsList; track topping) {
                                        <mat-option [value]="topping">{{topping}}</mat-option>
                                        }
                                    </mat-select>
                                    <mat-error *ngIf="f['tools'].errors?.['required']">
                                        <!-- <div *ngIf="submitted"> -->
                                        Please select at least one tool.
                                        <!-- </div> -->
                                    </mat-error>
                                </mat-form-field>
                            </div>
                            <!-- <div class="col-xl-4">
                                <label for="signup-country" class="form-label text-default"><strong>Country</strong><span class="text-danger">*</span></label>
                                <select class="form-select form-select-lg bg-light p-2 font-weight-bold bg-opacity-25 border border-dark" id="country" formControlName="country" 
                                    [ngClass]="{ 'is-invalid': submitted && f['country'].errors }">
                                    <option value="" disabled selected>Select</option>
                                    <option value="{{c.country}}" *ngFor="let c of countryLst">{{c.country}} (+{{ c.code }})</option>
                                </select>
                                <div *ngIf="submitted && f['country'].errors" class="invalid-feedback">
                                    <div *ngIf="f['country'].errors['required']">Country is required</div>
                                </div>
                            </div> -->
                            <div class="col-xl-4">
                                <label for="signup-phone" class="form-label text-default"><strong>Phone
                                        Number</strong><span class="text-danger"> *</span></label>
                                <div class="input-group custom-input-group">
                                    <!-- Country Code Select Dropdown -->
                                    <select
                                        class="form-select form-select-lg bg-light p-2 font-weight-bold bg-opacity-25 border border-dark"
                                        id="country1" formControlName="country" [(ngModel)]="selectedCountry"
                                        (change)="onCountryChange($any($event.target).value)"
                                        [ngClass]="{ 'is-invalid': submitted && f['country'].errors }">
                                        <option value="" disabled selected>code</option>
                                        <option *ngFor="let c of countryLst" [value]="c.country">
                                            <span *ngIf="selectedCountry !== c.country">{{ c.country }} (+{{ c.code
                                                }})</span>
                                            <span *ngIf="selectedCountry === c.country">+{{ c.code }}</span>
                                        </option>
                                    </select>
                                    <input type="text"
                                        class="form-control form-control-lg bg-light p-2 font-weight-bold bg-opacity-25 border border-dark"
                                        formControlName="phoneNumber" maxlength="10"
                                        onkeypress="return ((event.charCode >= 48 && event.charCode <= 57) || event.charCode == 8)"
                                        (copy)="preventCopyPaste($event)" (cut)="preventCopyPaste($event)"
                                        (paste)="preventCopyPaste($event)"
                                        [ngClass]="{ 'is-invalid': submitted && f['phoneNumber'].errors }">
                                </div>
                                <div *ngIf="submitted && f['phoneNumber'].errors" class="text-danger">
                                    <div *ngIf="f['phoneNumber'].errors['required']">Phone Number is required</div>
                                </div>
                            </div>
                            <div class="col-xl-4" *ngIf="showCity">
                                <label for="signup-city" class="form-label text-default"><strong>City</strong><span
                                        class="text-danger">*</span></label>
                                <select
                                    class="form-select form-control form-control-lg bg-light p-2 font-weight-bold bg-opacity-25 border border-dark"
                                    id="city" formControlName="city" [(ngModel)]="city"
                                    [ngClass]="{ 'is-invalid': submitted && f['city'].errors }">
                                    <option value="" disabled selected>Select</option>
                                    <option value="Bangalore">Bangalore</option>
                                    <option value="Chennai">Chennai</option>
                                    <option value="Delhi">Delhi</option>
                                    <option value="Hyderabad">Hyderabad</option>
                                </select>
                                <div *ngIf="submitted && f['city'].errors" class="invalid-feedback">
                                    <div *ngIf="f['city'].errors['required']">City is required</div>
                                </div>
                            </div>

                        </div>
                        <!-- <div class="d-grid gap-2 col-8 mx-auto mt-4">
                            <button class="btn btn-lg bg-light p-2 font-weight-bold text-dark bg-opacity-25 border border-dark" (click)="onSignup()"
                            [disabled]="btnDisable">Create Account</button>
                        </div> -->
                    </form>
                </div>
            </div>
            <div class="card-footer bg-white" *ngIf="isAddEdt">
                <div class="row">
                    <div class="col-xl-12">
                        <div class="float-end">
                            <button type="button" class="btn btn-sm btn-success text-center me-2" (click)="onSubmit();"
                                *ngIf="aeTyp == 'a'">Save
                            </button>
                            <button type="button" class="btn btn-sm btn-danger text-center"
                                (click)="isAddEdt=!isAddEdt;onRst()">Cancel
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<ng-template #modalTemplate>
    <div class="modal fade show d-block" style="background: rgba(0,0,0,0.5);" tabindex="-1">
        <div class="modal-dialog bg-light p-2 text-white bg-opacity-50">
            <div class="modal-content bg-light p-2 text-white bg-opacity-50">
                <div class="modal-header justify-content-center">
                    <h5 class="modal-title">OTP</h5>
                    <!-- <button type="button" class="btn-close" aria-label="Close" (click)="closeModal()"></button> -->
                </div>
                <div class="modal-body">
                    <div class="col-xl-12">
                        <div class="otp-container">
                            <input class="bg-light p-2 font-weight-bold bg-opacity-25 border border-dark"
                                *ngFor="let digit of otpArray; let i = index" type="text" maxlength="1"
                                (input)="onInputChange($event, i)" (keydown)="onKeydown($event, i)" [(ngModel)]="otp[i]"
                                onkeypress='return ((event.charCode >= 48 && event.charCode <= 57) || event.charCode == 8)'
                                [ngModelOptions]="{standalone: true}" [attr.aria-label]="'Digit ' + (i + 1)" />
                        </div>
                    </div>
                    <div class="col-xl-12 justify-content-center text-center text-dark">
                        <span>Don't get otp ? &nbsp; &nbsp;
                            <a href="javascript:void(0)" class="text-primary"
                                (click)="onMailCheck();isResend=true">resend </a></span>
                    </div>
                </div>
                <div class="modal-footer justify-content-center">
                    <button type="button"
                        class="btn btn-lg bg-light p-2 font-weight-bold text-dark bg-opacity-25 border border-dark"
                        (click)="onOtpCheck()" [disabled]="isOkBtn">Submit</button>
                </div>
            </div>
        </div>
    </div>
</ng-template>


<!-- Start::row-4 -->
<div class="row">
    <div class="col-xl-12">
        <div class="card custom-card">
            <div class="card-header justify-content-between">
                <div class="card-title">
                    <h6>Choose a Category for Your Project Stages</h6>
                </div>
                <!-- <div class="d-flex flex-wrap">
                    <select class="form-select form-control form-control-lg" [(ngModel)]="selectedOption">
                      <option value="" disabled>Select</option>
                      <option value="Static">Static</option>
                      <option value="Dynamic">Dynamic</option>
                    </select>
                </div> -->
                <div class="d-flex float-end">
                    <button class="btn btn-primary" type="button" (click)="openRight(content)"
                        data-bs-target="#offcanvasRight" aria-controls="offcanvasRight">Click</button>
                </div>
            </div>

        </div>
    </div>
</div>
<!-- End::row-4 -->

<!-- <div class="row" *ngIf="selectedOption === 'Dynamic'">
    <div class="col-xl-12">
        <div class="card custom-card">
            <div class="card-header justify-content-between">
                <div class="card-title">
                    Project Stages
                </div>
                
                <div class="d-flex flex-wrap gap-2">
                    <button type="button" (click)="addQuantity()" class="btn btn-primary">Add More <i
                        class="ri-add-line align-middle me-1 fw-medium"></i></button> 
                </div>
            </div>
            <div class="card-body pt-2">
                
                <form [formGroup]="productForm"> 
                    <div class="d-flex gap-3 pt-3 pb-3">
                        <div class="col-xxl-6">
                            <label for="name">Design status</label>  
                            <input type="text" id="name" name="name" placeholder="Enter Design Stage" formControlName="name" class="form-control">
                        </div>
                        <div class="col-xxl-4 ">
                            <label for="">Percentage</label>
                            <input type="text" placeholder="Enter Design Percentage" formControlName="price" class="form-control">
                        </div>
                        
                        <div class="col-xxl-2 pt-3"> 
                            <button type="button" (click)="addQuantity()" class="btn btn-primary">Add More <i
                                class="ri-add-line align-middle me-1 fw-medium"></i></button> 
                        </div>
                    </div>
                    <div *ngFor="let quantity of quantities().controls; let i=index" [formGroupName]="i" class="d-flex gap-3 pb-3">
                        <div class="col-xxl-6">
                            <label for="name">Design status</label>  
                            <input type="text" id="name" name="name" placeholder="Enter Design Stage" formControlName="name" class="form-control">
                        </div>
                        <div class="col-xxl-4 ">
                            <label for="">Percentage</label>
                            <input type="text" placeholder="10%" formControlName="Enter Design Percentage" class="form-control">
                        </div>
                        <div class="col-xxl-2 pt-3 ">
                            <button (click)="removeQuantity(i)" class="btn btn-danger">Remove</button>
                        </div>
                    </div>
                    
                </form> 
                
            </div>
            
        </div>
    </div>
</div> -->

<!-- Start::row-4 -->
<div class="row">
    <div class="col-xl-8">
        <div class="card custom-card">
            <div class="card-header justify-content-between">
                <div class="card-title">
                    Project Stages
                </div>
                <!-- <div class="d-flex flex-wrap gap-2">
                    <button type="button" (click)="addQuantity()" class="btn btn-primary">Add More <i
                        class="ri-add-line align-middle me-1 fw-medium"></i></button> 
                </div> -->
            </div>
            <div class="container mt-4">
                <div *ngFor="let field of dynamicFields; let i = index" class="row mb-3 align-items-center">
                    <div class="col-sm-8">
                      <input type="text" class="form-control"  [ngModel]="field.value" [ngModelOptions]="{standalone: true}"
                        [readonly]="true" placeholder="No Value">
                    </div>
                    <div class="col-sm-2">
                      <input type="text"  class="form-control" [(ngModel)]="field.percent" [ngModelOptions]="{standalone: true}"
                        placeholder="Percent">
                    </div>
                </div>
                <button type="button" class="btn btn-primary" (click)="saveLastStages()">Save</button>
            </div>
        </div>
    </div>
</div>
<!-- End::row-4 -->

<!-- <ng-template #content let-offcanvas>
    <div class="offcanvas-header border-bottom border-block-end-dashed justify-content-between">
        <h5 class="offcanvas-title" id="offcanvasExampleLabel"><strong>Design Status</strong></h5>
        <button type="button" (click)="addQuantity()" class="btn btn-primary float-end">Add More <i
            class="ri-add-line align-middle me-1 fw-medium"></i></button> 
        <button (click)="offcanvas.dismiss('Cross click')" type="button" class="btn-close" data-bs-dismiss="offcanvas"
            aria-label="Close"></button>
    </div>
    <div class="offcanvas-body p-0">
        <div>
            <ul class="list-group list-group-flush mb-0">
                <li class="list-group-item">
                    <div class="d-flex align-items-center">
                        <div class="flex-fill">
                                <h6 class="offcanvas-title ps-4" >Select from standard sections</h6>
                                <div class="d-flex justify-content-between pt-2 gap-3 pt-3">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="" id="checkebox-sm" checked>
                                        <label class="form-check-label ps-2" for="checkebox-sm">
                                            WALL AND DEMOLITION PLAN
                                        </label>
                                    </div>
                                </div>
                                
                                    <div class="col-xl-4 col-lg-4 col-md-4 col-sm-4">
                                        <input type="text" class="form-control form-control-lg" id="input" placeholder="enter custom selection name">
                                    </div>
                                    
                        </div>
                    </div>
                </li>   
            </ul>
        </div>
    </div>
</ng-template> -->


<ng-template #content let-offcanvas>
    <div class="offcanvas-header border-bottom border-block-end-dashed justify-content-between">
        <h5 class="offcanvas-title" id="offcanvasExampleLabel"><strong>Design Status</strong></h5>
        <button type="button" class="btn btn-primary float-end" (click)="toggleAddMore()">
            Add More <i class="ri-add-line align-middle me-1 fw-medium"></i>
        </button>
        <button (click)="offcanvas.dismiss('Cross click')" type="button" class="btn-close" data-bs-dismiss="offcanvas"
            aria-label="Close"></button>
    </div>
    <div class="offcanvas-body p-0">
        <ul class="list-group list-group-flush mb-0">
            <li class="list-group-item">
                <div class="container mt-3">
                    <div *ngIf="addMoreVisible" class="col-12">
                        <div class="row">
                            <div class="col-xl-4 mb-3">
                                <input type="text" class="form-control" placeholder="Enter value" [(ngModel)]="newItem">
                            </div>
                            <div class="col-xl-4 mb-3">
                                <button class="btn btn-primary" type="button" (click)="addItem()">Add</button>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Dynamic Plan Details Section -->
                <div *ngFor="let plan of planDetails; let i = index" class="form-check mb-2 d-flex align-items-center">
                    <input class="form-check-input me-2" type="checkbox" [(ngModel)]="plan.checked" [id]="'plan-' + i"
                    (change)="onCheckboxChange()">
                    <label class="form-check-label flex-grow-1" [for]="'plan-' + i">{{ plan.name }}</label>
                    <button class="btn btn-danger btn-sm" type="button" *ngIf="!plan.isDefault" (click)="deleteItem(i)">
                        Delete
                    </button>
                </div>
                <div class="col-xl-2 float-end">
                    <button class="btn btn-success btn-sm" type="button" (click)="saveInitialStage()">save</button>
                </div>
            </li>
        </ul>
    </div>
</ng-template>

<div class="row">
    <div class="col-xl-12">
        <div class="card custom-card">
            <div class="card-header justify-content-between">
                <div class="card-title">
                    Static Fileds
                </div>
                <div class="d-flex flex-wrap gap-2">
                    <!-- <div>
                        <input class="form-control form-control-sm" type="text" placeholder="Search Here" aria-label=".form-control-sm example">
                    </div> -->
                    <div ngbDropdown class="dropdown">
                        <a ngbDropdownToggle href="javascript:void(0);"
                            class="btn btn-primary btn-sm btn-wave waves-effect waves-light" data-bs-toggle="dropdown"
                            aria-expanded="false">
                            Sort By
                        </a>
                        <ul ngbDropdownMenu class="dropdown-menu" role="menu">
                            <li><a ngbDropdownItem class="dropdown-item" href="javascript:void(0);">New</a></li>
                            <li><a ngbDropdownItem class="dropdown-item" href="javascript:void(0);">Popular</a></li>
                            <li><a ngbDropdownItem class="dropdown-item" href="javascript:void(0);">Relevant</a></li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="card-body p-0">
                <div class="table-responsive">
                    <table class="table text-nowrap table-hover">
                        <thead>
                            <tr>
                                <th scope="row" class="ps-4"><input class="form-check-input" type="checkbox"
                                        id="checkboxNoLabel1" value="" aria-label="..."></th>
                                <th scope="col">Name of File</th>
                                <th scope="col">Type of File</th>
                                <th scope="col">Uploaded by</th>
                                <th scope="col">Uploaded On</th>
                                <th scope="col">Status</th>
                                <th scope="col">Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <th scope="row" class="ps-4"><input class="form-check-input" type="checkbox"
                                        id="checkboxNoLabel2" value="" aria-label="..."></th>
                                <td>
                                    <div class="d-flex align-items-center">
                                        <span class="avatar avatar-sm me-2 avatar-rounded">
                                            <img src="./assets/images/faces/4.jpg" alt="img">
                                        </span>2D WORKING DRAWINGS
                                    </div>
                                </td>
                                <td>pdf</td>
                                <td>M.Anjaneyulu, Varma Group</td>
                                <td>
                                    <span class="badge bg-info-transparent">9 Aug 2024, 4:16 pm</span>
                                </td>
                                <td>Approved</td>
                                <td>
                                    <div class="hstack gap-2 fs-15">
                                        <a aria-label="anchor" href="javascript:void(0);"
                                            class="btn btn-icon btn-wave waves-effect waves-light btn-sm btn-success-light rounded-circle"><i
                                                class="ri-phone-line"></i></a>
                                        <a aria-label="anchor" href="javascript:void(0);"
                                            class="btn btn-icon btn-wave waves-effect waves-light btn-sm btn-primary-light rounded-circle"><i
                                                class="ri-edit-line"></i></a>
                                        <a aria-label="anchor" href="javascript:void(0);"
                                            class="btn btn-icon btn-wave waves-effect waves-light btn-sm btn-danger-light rounded-circle"><i
                                                class="ri-delete-bin-line"></i></a>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <th scope="row" class="ps-4"><input class="form-check-input" type="checkbox"
                                        id="checkboxNoLabel13" value="" aria-label="..." checked=""></th>
                                <td>
                                    <div class="d-flex align-items-center">
                                        <span class="avatar avatar-sm me-2 avatar-rounded">
                                            <img src="./assets/images/faces/15.jpg" alt="img">
                                        </span>Andrew Garfield
                                    </div>
                                </td>
                                <td>Development</td>
                                <td>andrewgarfield&#64;gmail.com</td>
                                <td>
                                    <span class="badge bg-primary-transparent">New Lead</span>
                                </td>
                                <td>(555)-23526</td>
                                <td>
                                    <div class="hstack gap-2 fs-15">
                                        <a aria-label="anchor" href="javascript:void(0);"
                                            class="btn btn-icon btn-wave waves-effect waves-light btn-sm btn-success-light rounded-circle"><i
                                                class="ri-phone-line"></i></a>
                                        <a aria-label="anchor" href="javascript:void(0);"
                                            class="btn btn-icon btn-wave waves-effect waves-light btn-sm btn-primary-light rounded-circle"><i
                                                class="ri-edit-line"></i></a>
                                        <a aria-label="anchor" href="javascript:void(0);"
                                            class="btn btn-icon btn-wave waves-effect waves-light btn-sm btn-danger-light rounded-circle"><i
                                                class="ri-delete-bin-line"></i></a>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <th scope="row" class="ps-4"><input class="form-check-input" type="checkbox"
                                        id="checkboxNoLabel4" value="" aria-label="..."></th>
                                <td>
                                    <div class="d-flex align-items-center">
                                        <span class="avatar avatar-sm me-2 avatar-rounded">
                                            <img src="./assets/images/faces/11.jpg" alt="img">
                                        </span>Simon Cowel
                                    </div>
                                </td>
                                <td>Service</td>
                                <td>simoncowel234&#64;gmail.com</td>
                                <td>
                                    <span class="badge bg-danger-transparent">Lost Lead</span>
                                </td>
                                <td>(555)-25262</td>
                                <td>
                                    <div class="hstack gap-2 fs-15">
                                        <a aria-label="anchor" href="javascript:void(0);"
                                            class="btn btn-icon btn-wave waves-effect waves-light btn-sm btn-success-light rounded-circle"><i
                                                class="ri-phone-line"></i></a>
                                        <a aria-label="anchor" href="javascript:void(0);"
                                            class="btn btn-icon btn-wave waves-effect waves-light btn-sm btn-primary-light rounded-circle"><i
                                                class="ri-edit-line"></i></a>
                                        <a aria-label="anchor" href="javascript:void(0);"
                                            class="btn btn-icon btn-wave waves-effect waves-light btn-sm btn-danger-light rounded-circle"><i
                                                class="ri-delete-bin-line"></i></a>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <th scope="row" class="ps-4"><input class="form-check-input" type="checkbox"
                                        id="checkboxNoLabel5" value="" aria-label="..." checked=""></th>
                                <td>
                                    <div class="d-flex align-items-center">
                                        <span class="avatar avatar-sm me-2 avatar-rounded">
                                            <img src="./assets/images/faces/8.jpg" alt="img">
                                        </span>Mirinda Hers
                                    </div>
                                </td>
                                <td>Marketing</td>
                                <td>mirindahers&#64;gmail.com</td>
                                <td>
                                    <span class="badge bg-warning-transparent">Warm Lead</span>
                                </td>
                                <td>(555)-66955</td>
                                <td>
                                    <div class="hstack gap-2 fs-15">
                                        <a aria-label="anchor" href="javascript:void(0);"
                                            class="btn btn-icon btn-wave waves-effect waves-light btn-sm btn-success-light rounded-circle"><i
                                                class="ri-phone-line"></i></a>
                                        <a aria-label="anchor" href="javascript:void(0);"
                                            class="btn btn-icon btn-wave waves-effect waves-light btn-sm btn-primary-light rounded-circle"><i
                                                class="ri-edit-line"></i></a>
                                        <a aria-label="anchor" href="javascript:void(0);"
                                            class="btn btn-icon btn-wave waves-effect waves-light btn-sm btn-danger-light rounded-circle"><i
                                                class="ri-delete-bin-line"></i></a>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <th scope="row" class="ps-4"><input class="form-check-input" type="checkbox"
                                        id="checkboxNoLabel3" value="" aria-label="..." checked=""></th>
                                <td>
                                    <div class="d-flex align-items-center">
                                        <span class="avatar avatar-sm me-2 avatar-rounded">
                                            <img src="./assets/images/faces/9.jpg" alt="img">
                                        </span>Jacob Smith
                                    </div>
                                </td>
                                <td>Social Plataform</td>
                                <td>jacobsmith&#64;gmail.com</td>
                                <td>
                                    <span class="badge bg-success-transparent">Cold Lead</span>
                                </td>
                                <td>(555)-14692</td>
                                <td>
                                    <div class="hstack gap-2 fs-15">
                                        <a aria-label="anchor" href="javascript:void(0);"
                                            class="btn btn-icon btn-wave waves-effect waves-light btn-sm btn-success-light rounded-circle"><i
                                                class="ri-phone-line"></i></a>
                                        <a aria-label="anchor" href="javascript:void(0);"
                                            class="btn btn-icon btn-wave waves-effect waves-light btn-sm btn-primary-light rounded-circle"><i
                                                class="ri-edit-line"></i></a>
                                        <a aria-label="anchor" href="javascript:void(0);"
                                            class="btn btn-icon btn-wave waves-effect waves-light btn-sm btn-danger-light rounded-circle"><i
                                                class="ri-delete-bin-line"></i></a>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="card-footer border-top-0">
                <div class="d-flex align-items-center">
                    <div>
                        Showing 5 Entries <i class="bi bi-arrow-right ms-2"></i>
                    </div>
                    <div class="ms-auto">
                        <nav aria-label="Page navigation" class="pagination-style-4">
                            <ul class="pagination mb-0">
                                <li class="page-item disabled">
                                    <a class="page-link" href="javascript:void(0);">
                                        Prev
                                    </a>
                                </li>
                                <li class="page-item active"><a class="page-link" href="javascript:void(0);">1</a></li>
                                <li class="page-item"><a class="page-link" href="javascript:void(0);">2</a></li>
                                <li class="page-item">
                                    <a class="page-link text-primary" href="javascript:void(0);">
                                        next
                                    </a>
                                </li>
                            </ul>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- <div class="container mt-4">
    <h3>Plan Details</h3>
    <div class="row">
        <div class="col-xl-4 mb-3">
            <input type="text" class="form-control" placeholder="Enter value" [(ngModel)]="newItem">
        </div>
        <div class="col-xl-4 mb-3">
            <button class="btn btn-primary" type="button" (click)="addItem()">Add</button>
        </div>
    </div>
    <div *ngFor="let plan of planDetails; let i = index" class="form-check mb-2 d-flex align-items-center">
        <input class="form-check-input me-2" type="checkbox" [(ngModel)]="plan.checked" [id]="'plan-' + i">
        <label class="form-check-label flex-grow-1" [for]="'plan-' + i">{{ plan.name }}</label>
        <button class="btn btn-danger btn-sm" type="button" *ngIf="!plan.isDefault"
            (click)="deleteItem(i)">Delete</button>
    </div>
</div> -->


  
