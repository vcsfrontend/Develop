<div class="my-4 page-header-breadcrumb d-flex align-items-center justify-content-between flex-wrap gap-2">
    <div>
        <h1 class="page-title fw-medium fs-18 mb-2">Projects</h1>
        <div class="">
            <nav>
                <ol class="breadcrumb mb-0">
                    <li class="breadcrumb-item"><a href="javascript:void(0);">Dashboard</a></li>
                    <li class="breadcrumb-item active" aria-current="page">Projects</li>
                </ol>
            </nav>
        </div>
    </div>
</div>
<div class="col-xl-12 col-xxl-12 col-md-12 col-lg-12 col-sm-12">
    <div class="card custom-card ">
        <div class="card-header justify-content-between">
            <marquee behavior="scroll" direction="left" class="fs-18 font-weight-bold" style="color: #006699;">
                <p *ngIf="dateDiff=='0'" ><strong> Upgrade Your Plan</strong></p>
                <p *ngIf="dateDiff!='0'" ><strong> Enjoy Your {{dateDiff}} Days Free Trail </strong></p>
            </marquee>
        </div>
        <div class="row">
            <div class="card-body col-xxl-12 col-xl-12 col-md-12 col-lg-12 col-sm-12 text-center">
                <div class="d-grid gap-2 text-center">
                    <img class="rounded mx-auto d-block demo" src="/assets/images/company-logos/adonai_logo.png" alt="">
                </div>
            </div>
            <div class="col-xxl-4 col-lg-4 col-md-4 col-xl-4 col-6  text-center mx-auto">
                <button class="btn button   btn-wave btn-w-lg  font-weight-bold" 
                    style="background-color: #006699; color: white;"  aria-expanded="false" (click)="onClkDesign()"
                    type="button" [attr.disabled]="dateDiff == '0'">Click to Explore Endless Designs </button>

            </div>
        </div>
    </div>
</div>
<!-- Start::row-1 -->
<div class="row">
    <div class="col-xxl-12">
        <div class="row">
            <div class="col-xl-3">
                <div class="card custom-card overflow-hidden">
                    <div class="card-body p-0">
                        <div class="p-3 pb-0">
                            <div class="mb-3 d-flex align-items-start justify-content-between">
                                <span class="avatar avatar-rounded bg-success-transparent">
                                    <i class="ti ti-album fs-20"></i>
                                </span>
                                <span class="badge bg-danger-transparent">{{pjData.totalProjPercent | number:'1.2-2' }}
                                    %</span>
                            </div>
                            <div class="text-muted mb-2">Total Projects</div>
                            <h4 class="mb-0">{{pjData.totalProjects}}</h4>
                        </div>
                        <div id="total-projects">
                            <apx-chart [series]="chartOptions2.series" [chart]="chartOptions2.chart"
                                [xaxis]="chartOptions2.xaxis" [colors]="chartOptions2.colors"
                                [fill]="chartOptions2.fill" [stroke]="chartOptions2.stroke"
                                [tooltip]="chartOptions2.tooltip" [dataLabels]="chartOptions2.dataLabels"
                                [grid]="chartOptions2.grid" [yaxis]="chartOptions2.yaxis"></apx-chart>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-xl-3">
                <div class="card custom-card overflow-hidden">
                    <div class="card-body p-0">
                        <div class="p-3 pb-0">
                            <div class="mb-3 d-flex align-items-start justify-content-between">
                                <span class="avatar avatar-rounded bg-primary-transparent">
                                    <i class="ti ti-file-check fs-20"></i>
                                </span>
                                <span class="badge bg-success-transparent">{{pjData.completeProjPercent | number:'1.2-2'
                                    }} %</span>
                            </div>
                            <div class="text-muted mb-2">Completed Projects</div>
                            <h4 class="mb-0">{{pjData.completedProj}}</h4>
                        </div>
                        <div id="completed-projects">
                            <apx-chart [series]="chartOptions.series" [chart]="chartOptions.chart"
                                [xaxis]="chartOptions.xaxis" [colors]="chartOptions.colors" [fill]="chartOptions.fill"
                                [stroke]="chartOptions.stroke" [tooltip]="chartOptions.tooltip"
                                [dataLabels]="chartOptions.dataLabels" [grid]="chartOptions.grid"
                                [yaxis]="chartOptions.yaxis"></apx-chart>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-xl-3">
                <div class="card custom-card overflow-hidden">
                    <div class="card-body p-0">
                        <div class="p-3 pb-0">
                            <div class="mb-3 d-flex align-items-start justify-content-between">
                                <span class="avatar avatar-rounded bg-danger-transparent">
                                    <i class="ti ti-chart-pie-2 fs-20"></i>
                                </span>
                                <span class="badge bg-success-transparent">{{pjData.pendingProjPecent | number:'1.2-2'
                                    }} %</span>
                            </div>
                            <div class="text-muted mb-2">Pending Projects</div>
                            <h4 class="mb-0">{{pjData.pendingProj}}</h4>
                        </div>
                        <div id="pending-projects">
                            <apx-chart [series]="chartOptions3.series" [chart]="chartOptions3.chart"
                                [xaxis]="chartOptions3.xaxis" [colors]="chartOptions3.colors"
                                [fill]="chartOptions3.fill" [stroke]="chartOptions3.stroke"
                                [tooltip]="chartOptions3.tooltip" [dataLabels]="chartOptions3.dataLabels"
                                [grid]="chartOptions3.grid" [yaxis]="chartOptions3.yaxis"></apx-chart>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-xl-3">
                <div class="card custom-card overflow-hidden">
                    <div class="card-body p-0">
                        <div class="p-3 pb-0">
                            <div class="mb-3 d-flex align-items-start justify-content-between">
                                <span class="avatar avatar-rounded bg-info-transparent">
                                    <i class="ti ti-briefcase fs-20"></i>
                                </span>
                                <span class="badge bg-success-transparent">{{pjData.overdueProjPercrnt | number:'1.2-2'
                                    }} %</span>
                            </div>
                            <div class="text-muted mb-2">Overdue Projects</div>
                            <h4 class="mb-0">{{pjData.overdueProj}}</h4>
                        </div>
                        <div id="overdue-projects">
                            <apx-chart [series]="chartOptions1.series" [chart]="chartOptions1.chart"
                                [xaxis]="chartOptions1.xaxis" [colors]="chartOptions1.colors"
                                [fill]="chartOptions1.fill" [stroke]="chartOptions1.stroke"
                                [tooltip]="chartOptions1.tooltip" [dataLabels]="chartOptions1.dataLabels"
                                [grid]="chartOptions1.grid" [yaxis]="chartOptions1.yaxis"></apx-chart>
                        </div>
                    </div>
                </div>
            </div>
            <!-- <ng-container *ngIf="visible">
            <div class="col-xl-3">
                <div class="card custom-card overflow-hidden">
                    <div class="card-body p-0">
                        <div class="p-3 pb-0">
                            <div class="mb-3 d-flex align-items-start justify-content-between">
                                <span class="avatar avatar-rounded bg-info-transparent">
                                    <i class="ti ti-briefcase fs-20"></i>
                                </span>
                                <span class="badge bg-success-transparent">+4.32%</span>
                            </div>
                            <div class="text-muted mb-2">Projects Revenue</div>
                            <h4 class="mb-0">28</h4>
                        </div>
                        <div id="overdue-projects">
                            <apx-chart [series]="chartOptions1.series" [chart]="chartOptions1.chart"
                                [xaxis]="chartOptions1.xaxis" [colors]="chartOptions1.colors" [fill]="chartOptions1.fill"
                                [stroke]="chartOptions1.stroke" [tooltip]="chartOptions1.tooltip"
                                [dataLabels]="chartOptions1.dataLabels" [grid]="chartOptions1.grid"
                                [yaxis]="chartOptions1.yaxis"></apx-chart>
                        </div>
                    </div>
                </div>
            </div>
            </ng-container> -->
            <div class="col-xl-12">
                <div class="card custom-card">
                    <div class="card-header justify-content-between">
                        <div class="card-title">Projects Revenue</div>
                        <div class="d-flex align-items-center gap-2">
                            <span class="text-muted">Year - </span>
                            <div ngbDropdown class="dropdown">
                                <a ngbDropdownToggle href="javascript:void(0);" class="btn btn-light btn-sm border"
                                    data-bs-toggle="dropdown">
                                    2024
                                </a>
                                <!-- <ul ngbDropdownMenu class="dropdown-menu" role="menu">
                                    <li><a ngbDropdownItem class="dropdown-item" href="javascript:void(0);">2024</a>
                                    </li>
                                    <li><a ngbDropdownItem class="dropdown-item" href="javascript:void(0);">2021</a>
                                    </li>
                                    <li><a ngbDropdownItem class="dropdown-item" href="javascript:void(0);">2020</a>
                                    </li>
                                </ul> -->
                            </div>
                        </div>
                    </div>
                    <div class="card-body p-0">
                        <div class="row g-0">
                            <div class="col-xl-8 border-end border-inline-end-dashed">
                                <div class="p-3">
                                    <div class="card-body">
                                        <div id="mixed-multiple-y">

                                            <apx-chart [series]="chartOptions7.series" [chart]="chartOptions7.chart"
                                                [yaxis]="chartOptions7.yaxis" [xaxis]="chartOptions7.xaxis"
                                                [labels]="chartOptions7.labels" [stroke]="chartOptions7.stroke"
                                                [markers]="chartOptions7.markers" [fill]="chartOptions7.fill"
                                                [tooltip]="chartOptions7.tooltip"
                                                [colors]="chartOptions7.colors"></apx-chart>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xl-4 ps-0">
                                <div class="p-3">
                                    <div class="border rounded p-3 mb-4 position-relative overflow-hidden">
                                        <div class="d-flex align-items-center justify-content-between">
                                            <div class="d-flex align-items-center justify-content-between mb-4">
                                                <div>
                                                    <h6 class="text-warning mb-3">Total Revenue</h6>
                                                    <span
                                                        class="fs-25 d-flex align-items-center">{{pjData.totalRevenue}}
                                                        <span
                                                            class="fs-12 text-warning op-7 ms-2">{{pjData.totalRevenuePecent
                                                            | number:'1.2-2' }}<i
                                                                class="ti ti-arrow-big-up-line ms-1 d-inline-flex"></i></span></span>
                                                </div>
                                            </div>
                                            <div id="projects-ongoing" class="mt-1 w-100">
                                                <apx-chart [series]="chartOptions5.series" [chart]="chartOptions5.chart"
                                                    [xaxis]="chartOptions5.xaxis" [colors]="chartOptions5.colors"
                                                    [stroke]="chartOptions5.stroke" [tooltip]="chartOptions5.tooltip"
                                                    [dataLabels]="chartOptions5.dataLabels" [grid]="chartOptions5.grid"
                                                    [yaxis]="chartOptions5.yaxis"></apx-chart>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="border rounded p-3 mb-4">
                                        <div class="d-flex align-items-center justify-content-between">
                                            <div>
                                                <span class="d-block fs-16 mb-3">Pending income</span>
                                                <h3 class="mb-3">{{pjData.pendingIncome}}</h3>
                                                <span class="d-block text-muted">Increased by <span
                                                        class="text-green ms-1">{{pjData.pendingIncomePercent |
                                                        number:'1.2-2' }}<i
                                                            class="ti ti-arrow-narrow-up"></i></span></span>
                                            </div>
                                            <!-- <div id="projects-done">
                                                <apx-chart [series]="chartOptions6.series" [chart]="chartOptions6.chart"
                                                    [xaxis]="chartOptions6.xaxis" [colors]="chartOptions6.colors"
                                                    [plotOptions]="chartOptions6.plotOptions"
                                                    [stroke]="chartOptions6.stroke"
                                                    [labels]="chartOptions6.labels"></apx-chart>
                                            </div> -->
                                        </div>
                                    </div>
                                    <div class="border rounded p-3 mb-4 position-relative overflow-hidden">
                                        <div class="d-flex align-items-center justify-content-between">
                                            <div class="d-flex align-items-center justify-content-between mb-4">
                                                <div>
                                                    <h6 class="text-warning mb-3">Received income</h6>
                                                    <span
                                                        class="fs-25 d-flex align-items-center">{{pjData.pendingIncome}}
                                                        <span
                                                            class="fs-12 text-warning op-7 ms-2">{{pjData.pendingIncomePercent
                                                            | number:'1.2-2' }}<i
                                                                class="ti ti-arrow-big-up-line ms-1 d-inline-flex"></i></span></span>
                                                </div>
                                            </div>
                                            <div id="projects-ongoing" class="mt-1 w-100">
                                                <apx-chart [series]="chartOptions5.series" [chart]="chartOptions5.chart"
                                                    [xaxis]="chartOptions5.xaxis" [colors]="chartOptions5.colors"
                                                    [stroke]="chartOptions5.stroke" [tooltip]="chartOptions5.tooltip"
                                                    [dataLabels]="chartOptions5.dataLabels" [grid]="chartOptions5.grid"
                                                    [yaxis]="chartOptions5.yaxis"></apx-chart>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="d-grid">
                                        <!-- <button type="button" class="btn btn-primary-ghost btn-wave btn-lg">View Total
                                            Revenue</button> -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- <div class="col-xxl-12">
        <div class="row">
            <div class="col-xl-12"> 
                <div class="card custom-card">
                    <div class="card-header justify-content-between">
                        <div class="card-title">
                            Projects Discussions
                        </div>
                        <button type="button" class="btn btn-sm btn-primary-light">View All<i
                                class="ri-arrow-right-line ms-1 align-middle"></i></button>
                    </div>
                    <div class="card-body">
                        <div class="card-header justify-content-between">
                            <div class="card-title">
                                Projects Discussions
                            </div>
                        </div>
                        <div class="timeline-label">
                            <ul class="list-unstyled ms-2 project-activity-list">
                                <li class="project-activity">
                                    <p class="mb-1 text-gray-700 fs-13 d-inline-flex ms-3">
                                        Group discussion today at 10:30 AM with Asperiores Group Solutions
                                    </p>
                                    <div>
                                        <span class="badge bg-secondary-transparent ms-3">Attend</span>
                                    </div>
                                </li>
                                <li class="project-activity">
                                    <p class="mb-1 text-gray-700 fs-13 d-inline-flex ms-3">Your application has accepted
                                        in 3 Vacancy by the voluptatibus Industries</p>
                                    <div>
                                        <span class="badge bg-secondary-transparent ms-3">12h ago</span>
                                    </div>
                                </li>
                                <li class="project-activity">
                                    <p class="mb-1 text-gray-700 fs-13 d-inline-flex ms-3">Final round interview today
                                        at 04:30 PM with Recusandae Institute</p>
                                    <div>
                                        <span class="badge bg-secondary-transparent ms-3">Attend</span>
                                    </div>
                                </li>
                                <li class="project-activity">
                                    <p class="mb-1 text-gray-700 fs-13 d-inline-flex ms-3">Group discussion today at
                                        09:30 AM with Asperiores Tech Group Solutions</p>
                                    <div>
                                        <span class="badge bg-secondary-transparent ms-3">Attend</span>
                                    </div>
                                </li>
                                <li class="project-activity">
                                    <p class="mb-1 text-gray-700 fs-13 d-inline-flex ms-3">Group discussion today at
                                        09:30 AM with Asperiores Tech Group Solutions</p>
                                    <div>
                                        <span class="badge bg-secondary-transparent ms-3">Attend</span>
                                    </div>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div> 
        </div>
    </div> -->
</div>
<!--End::row-1 -->
<!-- Start:: row-2 -->
<div class="row">
    <div class="col-xl-12">
        <div class="card custom-card">
            <div class="card-header justify-content-between">
                <div class="card-title">top Projects</div>
                    <!-- <button type="button" class="btn btn-sm btn-primary-light btn-wave waves-effect waves-light">View
                        All</button> -->
                            <!-- <label for="signup-phone" class="form-label text-default"><strong>Phone Number</strong><span class="text-danger"> *</span></label> -->
                <div class="col-md-4 col-xl-4 col-xxl-4 col-lg-4">
                <div class="input-group custom-input-group">
                    <select class="form-select" [(ngModel)]="addFilter" 
                        (change)="onFilterChange($any($event.target).value)">
                        <option value="1">All</option>
                        <option value="2">Project Id</option>
                        <option value="3">Project Name</option>
                    </select>
                    <input type="text" class="form-control" *ngIf="addFilter=='1'" [disabled]="true">
                    <input type="text" class="form-control" *ngIf="addFilter=='2'"
                        [(ngModel)]="projId" placeholder="enter project Id">
                    <input type="text" class="form-control" *ngIf="addFilter=='3'"
                        [(ngModel)]="projName" placeholder="enter project Name">
                    <button class="btn btn-ghost-light border" type="button" id="button-addon2" (click)="getMatCardLst()"><i
                        class="ri-search-line text-muted"></i></button>
                </div>
            </div>
            </div>
        </div>
    </div>
    <div class="col-xxl-3 col-lg-3 col-md-3 col-xl-3" *ngFor="let project of matcardLst">
        <div class="card custom-card">
            <div class="card-header d-flex align-items-center justify-content-between">
                <div class="me-2  align-items-center">
                    <span class="avatar avatar-rounded p-1 bg-light">
                        <img src="./assets/images/brand-logos/profile1.jpg" alt="">
                    </span>
                </div>
                <div class="flex-fill">
                    <a href="javascript:void(0);" class="fs-14 d-block text-truncate project-list-title">Project: {{project.projectName | slice:0:12}}</a>
                    <span class="text-muted d-block fs-12">Client: {{project.clientName | slice:0:12}}</span>
                        <!-- <span class="text-muted d-block fs-12">Total <strong class="text-default">18/22</strong> tasks
                            completed</span> -->
                </div>
                <!-- <div ngbDropdown class="dropdown no-caret">
                    <a ngbDropdownToggle aria-label="anchor" href="javascript:void(0);"
                        class="btn btn-icon btn-sm btn-light" data-bs-toggle="dropdown" aria-expanded="false">
                        <i class="fe fe-more-vertical"></i>
                    </a>
                    <ul ngbDropdownMenu class="dropdown-menu">
                        <li><a ngbDropdownItem class="dropdown-item" href="javascript:void(0);"><i
                                    class="ri-eye-line align-middle me-1 d-inline-block"></i>View</a></li>
                        <li><a ngbDropdownItem class="dropdown-item" href="javascript:void(0);"><i
                                    class="ri-edit-line align-middle me-1 d-inline-block"></i>Edit</a></li>
                        <li><a ngbDropdownItem class="dropdown-item" href="javascript:void(0);"><i
                                    class="ri-delete-bin-line me-1 align-middle d-inline-block"></i>Delete</a></li>
                    </ul>
                </div> -->
            </div>
            <div class="card-body">
                <div class="d-flex align-items-center justify-content-between mb-3">
                    <div>
                        <div class="mb-1">Team :</div>
                        <div class="avatar-list-stacked">
                            <span class="avatar avatar-sm avatar-rounded">
                                <img src="./assets/images/faces/2.jpg" alt="img">
                            </span>
                            <span class="avatar avatar-sm avatar-rounded">
                                <img src="./assets/images/faces/8.jpg" alt="img">
                            </span>
                            <span class="avatar avatar-sm avatar-rounded">
                                <img src="./assets/images/faces/2.jpg" alt="img">
                            </span>
                            <span class="avatar avatar-sm avatar-rounded">
                                <img src="./assets/images/faces/10.jpg" alt="img">
                            </span>
                            <a class="avatar avatar-sm bg-light avatar-rounded text-default" href="javascript:void(0);">
                                +2
                            </a>
                        </div>
                    </div>
                    <div class="text-end">
                        <div class="mb-1">Priority :</div>
                        <!-- <span class="badge bg-success-transparent">{{project.dateDifference}} days to go</span> -->
                        <span class="badge" [ngClass]="{'bg-danger-transparent text-danger': project.priorityDays < 0,
                            'bg-success-transparent': project.priorityDays >= 0}">{{project.priorityDays}} days to go</span>
                    </div>
                </div>
                <div class="mb-1">Project Status : {{project.projectState}}</div>
                <div class="mb-3">
                    <div></div>
                    <div class="progress progress-xs progress-animate" role="progressbar" aria-valuenow="80"
                        aria-valuemin="0" aria-valuemax="100">
                        <div class="progress-bar bg-primary" style="width: 80%"></div>
                    </div>
                    <div class="mt-1"><span class="text-primary fw-medium">80%</span> Completed</div>
                </div>
                <div class="mb-1">Payment Status : {{project.projectState}}</div>
                <div>
                    <div></div>
                    <div class="progress progress-xs progress-animate" role="progressbar" aria-valuenow="80"
                        aria-valuemin="0" aria-valuemax="100">
                        <div class="progress-bar bg-primary" style="width: 80%"></div>
                    </div>
                    <div class="mt-1"><span class="text-primary fw-medium">80%</span> Completed</div>
                </div>
            </div>
            <div class="d-flex justify-content-between align-items-center mb-3">
                <a class="btn btn-sm btn-primary btn-wave ms-3" (click)="onProjectAdd(project)"><i
                    class="ri-add-line align-middle me-1 fw-medium"></i>Add</a>
                        <!-- routerLink="/dashboard/mytask" -->
                <a class="btn btn-sm btn-primary btn-wave me-3" (click)="onProjectCycle(project)"><i
                    class="bi bi-calendar-date align-middle me-1 fw-medium"></i>Project Cycle</a>
                        <!-- routerLink="/pages/timeline" -->
            </div>
        </div>
    </div>
    <!-- <div class="col-xxl-4 col-lg-4 col-md-4 col-xl-4">
        <div class="card custom-card">
            <div class="card-header align-items-center d-flex justify-content-between">
                <div class="me-2">
                    <span class="avatar avatar-rounded p-1 bg-light">
                        <img src="./assets/images/brand-logos/profile1.jpg" alt="">
                    </span>
                </div>
                <div class="flex-fill">
                    <a href="javascript:void(0);" class="fs-14 d-block text-truncate project-list-title">Content
                        Management System (CMS) Integration</a>
                    <span class="text-muted d-block fs-12">Total <strong class="text-default">26/68</strong> tasks
                        completed</span>
                </div>
                <div ngbDropdown class="dropdown no-caret">
                    <a ngbDropdownToggle aria-label="anchor" href="javascript:void(0);"
                        class="btn btn-icon btn-sm btn-light" data-bs-toggle="dropdown" aria-expanded="false">
                        <i class="fe fe-more-vertical"></i>
                    </a>
                    <ul ngbDropdownMenu class="dropdown-menu">
                        <li><a ngbDropdownItem class="dropdown-item" href="javascript:void(0);"><i
                                    class="ri-eye-line align-middle me-1 d-inline-block"></i>View</a></li>
                        <li><a ngbDropdownItem class="dropdown-item" href="javascript:void(0);"><i
                                    class="ri-edit-line align-middle me-1 d-inline-block"></i>Edit</a></li>
                        <li><a ngbDropdownItem class="dropdown-item" href="javascript:void(0);"><i
                                    class="ri-delete-bin-line me-1 align-middle d-inline-block"></i>Delete</a></li>
                    </ul>
                </div>
            </div>
            <div class="card-body">
                <div class="d-flex align-items-center justify-content-between mb-3">
                    <div>
                        <div class="mb-1">Team :</div>
                        <div class="avatar-list-stacked">
                            <span class="avatar avatar-sm avatar-rounded">
                                <img src="./assets/images/faces/12.jpg" alt="img">
                            </span>
                            <span class="avatar avatar-sm avatar-rounded">
                                <img src="./assets/images/faces/9.jpg" alt="img">
                            </span>
                            <span class="avatar avatar-sm avatar-rounded">
                                <img src="./assets/images/faces/11.jpg" alt="img">
                            </span>
                            <a class="avatar avatar-sm bg-light avatar-rounded text-default" href="javascript:void(0);">
                                +4
                            </a>
                        </div>
                    </div>
                    <div class="text-end">
                        <div class="mb-1">Priority :</div>
                        <span class="badge bg-info-transparent">7 days to go </span>
                    </div>
                </div>
                <div class="mb-1">Status :</div>
                <div>
                    <div></div>
                    <div class="progress progress-xs progress-animate" role="progressbar" aria-valuenow="45"
                        aria-valuemin="0" aria-valuemax="100">
                        <div class="progress-bar bg-warning" style="width: 45%"></div>
                    </div>
                    <div class="mt-1"><span class="text-warning fw-medium">45%</span> Completed</div>
                </div>
            </div>
            <div class="d-flex justify-content-between align-items-center mb-3">
                <a class="btn btn-sm btn-primary btn-wave ms-3" routerLink="/dashboard/mytask"><i
                        class="ri-add-line align-middle me-1 fw-medium"></i>Add</a>
                <a class="btn btn-sm btn-primary btn-wave me-3" routerLink="/pages/timeline"><i
                        class="bi bi-calendar-date align-middle me-1 fw-medium"></i>Project Cycle</a>
            </div>
        </div>
    </div>
    <div class="col-xxl-4 col-lg-4 col-md-4 col-xl-4">
        <div class="card custom-card">
            <div class="card-header align-items-center d-flex justify-content-between">
                <div class="me-2">
                    <span class="avatar avatar-rounded p-1 bg-light">
                        <img src="./assets/images/brand-logos/profile1.jpg" alt="">
                    </span>
                </div>
                <div class="flex-fill">
                    <a href="javascript:void(0);" class="fs-14 d-block text-truncate project-list-title">Advanced Search
                        and Filtering</a>
                    <span class="text-muted d-block fs-12">Total <strong class="text-default">45/54</strong> tasks
                        completed</span>
                </div>
                <div ngbDropdown class="dropdown no-caret">
                    <a ngbDropdownToggle aria-label="anchor" href="javascript:void(0);"
                        class="btn btn-icon btn-sm btn-light" data-bs-toggle="dropdown" aria-expanded="false">
                        <i class="fe fe-more-vertical"></i>
                    </a>
                    <ul ngbDropdownMenu class="dropdown-menu">
                        <li><a ngbDropdownItem class="dropdown-item" href="javascript:void(0);"><i
                                    class="ri-eye-line align-middle me-1 d-inline-block"></i>View</a></li>
                        <li><a ngbDropdownItem class="dropdown-item" href="javascript:void(0);"><i
                                    class="ri-edit-line align-middle me-1 d-inline-block"></i>Edit</a></li>
                        <li><a ngbDropdownItem class="dropdown-item" href="javascript:void(0);"><i
                                    class="ri-delete-bin-line me-1 align-middle d-inline-block"></i>Delete</a></li>
                    </ul>
                </div>
            </div>
            <div class="card-body">
                <div class="d-flex align-items-center justify-content-between mb-3">
                    <div>
                        <div class="mb-1">Team :</div>
                        <div class="avatar-list-stacked">
                            <span class="avatar avatar-sm avatar-rounded">
                                <img src="./assets/images/faces/3.jpg" alt="img">
                            </span>
                            <span class="avatar avatar-sm avatar-rounded">
                                <img src="./assets/images/faces/9.jpg" alt="img">
                            </span>
                            <span class="avatar avatar-sm avatar-rounded">
                                <img src="./assets/images/faces/12.jpg" alt="img">
                            </span>
                            <span class="avatar avatar-sm avatar-rounded">
                                <img src="./assets/images/faces/11.jpg" alt="img">
                            </span>
                            <a class="avatar avatar-sm bg-light avatar-rounded text-default" href="javascript:void(0);">
                                +2
                            </a>
                        </div>
                    </div>
                    <div class="text-end">
                        <div class="mb-1">Priority :</div>
                        <span class="badge bg-danger-transparent">10 days to go</span>
                    </div>
                </div>
                <div class="mb-1">Status :</div>
                <div>
                    <div></div>
                    <div class="progress progress-xs progress-animate" role="progressbar" aria-valuenow="89"
                        aria-valuemin="0" aria-valuemax="100">
                        <div class="progress-bar bg-success" style="width: 89%"></div>
                    </div>
                    <div class="mt-1"><span class="text-success fw-medium">89%</span> Completed</div>
                </div>
            </div>
            <div class="d-flex justify-content-between align-items-center mb-3">
                <a class="btn btn-sm btn-primary btn-wave ms-3" routerLink="/dashboard/mytask"><i
                        class="ri-add-line align-middle me-1 fw-medium"></i>Add</a>
                <a class="btn btn-sm btn-primary btn-wave me-3" routerLink="/pages/timeline"><i
                        class="bi bi-calendar-date align-middle me-1 fw-medium"></i>Project Cycle</a>
            </div>
        </div>
    </div> -->
</div>
<!-- End:: row-2 -->
<!-- start:: row-3 -->
<div class="row">
    <div class="col-xl-12">
        <div class="card custom-card">
            <div class="card-header justify-content-between">
                <div class="card-title">
                    My Projects
                </div>

                <div class="d-flex flex-wrap gap-3">
                    <div ngbDropdown class="dropdown">
                        <button href="javascript:void(0);" class="btn btn-primary btn-sm btn-wave waves-effect waves-light"
                            aria-expanded="false" (click)="onClkDesign('n')" [attr.disabled]="dateDiff == '0'">
                            New Design
                        </button>
                        <!-- <ul ngbDropdownMenu class="dropdown-menu" role="menu">
                            <li><a ngbDropdownItem class="dropdown-item" href="javascript:void(0);">New</a></li>
                            <li><a ngbDropdownItem class="dropdown-item" href="javascript:void(0);">Popular</a></li>
                            <li><a ngbDropdownItem class="dropdown-item" href="javascript:void(0);">Relevant</a></li>
                        </ul> -->
                    </div>
                    <!-- <a routerLink="apps/projects/create-project" class="btn btn-primary me-2" href="apps/projects/create-project"><i
                        class="ri-add-line me-1 fw-medium align-middle"></i>New Project</a> -->
                    <div>
                        <a class="btn btn-sm btn-secondary btn-wave" data-bs-toggle="modal"
                            data-bs-target="#exampleModalLg" (click)="openLg(Content10);submitted=false"><i
                                class="ri-add-line align-middle me-1 fw-medium"></i>Create Project</a>
                    </div>
                </div>

            </div>
            <div class="card-body p-0">
                <div class="mat-elevation-z8">
                    <mat-form-field class="mt-2 p-2">
                        <mat-label>Filter</mat-label>
                        <input matInput (keyup)="applyFilter($event)" #input>
                    </mat-form-field>
                    <div class="table-responsive">
                        <table mat-table [dataSource]="dataSource">
                            <ng-container matColumnDef="slNo">
                                <th mat-header-cell *matHeaderCellDef> S.No. </th>
                                <td mat-cell *matCellDef="let element; let i = index"> {{getSNo(i)}} </td>
                            </ng-container>
                            <ng-container matColumnDef="projectId">
                                <th mat-header-cell *matHeaderCellDef> Project Id </th>
                                <td mat-cell *matCellDef="let element" data-bs-toggle="modal"
                                    data-bs-target="#exampleModalLg"
                                    (click)="openLg(Content11);onProjectDetails(element)"> {{element.projectId | slice:0:7}} </td>
                            </ng-container>
                            <!-- <ng-container matColumnDef="projectName">
                                <th mat-header-cell *matHeaderCellDef> Project Name </th>
                                <td mat-cell *matCellDef="let element"> {{element.projectName}} </td>
                            </ng-container> -->
                            <ng-container matColumnDef="clientName">
                                <th mat-header-cell *matHeaderCellDef> Client Name </th>
                                <td mat-cell *matCellDef="let element"> {{element.clientName}} </td>
                            </ng-container>
                            <ng-container matColumnDef="projStatus">
                                <th mat-header-cell *matHeaderCellDef>Project Status</th>
                                <td mat-cell *matCellDef="let element"> {{element.projStatus}} </td>
                            </ng-container>
                            <!-- <ng-container matColumnDef="businessCategory">
                                <th mat-header-cell *matHeaderCellDef> Business Category</th>
                                <td mat-cell *matCellDef="let element"> {{element.businessCategory}} </td>
                            </ng-container>
                            <ng-container matColumnDef="projectAddress">
                                <th mat-header-cell *matHeaderCellDef> Project Address </th>
                                <td mat-cell *matCellDef="let element"> {{element.projectAddress}} </td>
                            </ng-container>
                            <ng-container matColumnDef="state">
                                <th mat-header-cell *matHeaderCellDef>State </th>
                                <td mat-cell *matCellDef="let element"> {{element.state}} </td>
                            </ng-container>
                            <ng-container matColumnDef="city">
                                <th mat-header-cell *matHeaderCellDef> City </th>
                                <td mat-cell *matCellDef="let element"> {{element.city}} </td>
                            </ng-container>
                            <ng-container matColumnDef="projectState">
                                <th mat-header-cell *matHeaderCellDef>Project Stage</th>
                                <td mat-cell *matCellDef="let element"> {{element.projectState}} </td>
                            </ng-container> -->
                            <ng-container matColumnDef="projectEstimation">
                                <th mat-header-cell *matHeaderCellDef>Project Estimation</th>
                                <td mat-cell *matCellDef="let element" data-bs-toggle="modal"
                                data-bs-target="#exampleModalLg" (click)="VerticallyScrol(Content12); fetchPaymentStages(element)" >
                                    {{element.projectEstimation}} </td>
                            </ng-container>
                            <ng-container matColumnDef="projectArea">
                                <th mat-header-cell *matHeaderCellDef>Project Area</th>
                                <td mat-cell *matCellDef="let element"> {{element.projectArea}} </td>
                            </ng-container>
                            <!-- <ng-container matColumnDef="action">
                                <th mat-header-cell *matHeaderCellDef>Action</th>
                                <td mat-cell *matCellDef="let element"> {{element.action}} </td>
                            </ng-container> -->
                            <ng-container matColumnDef="projectStartDate">
                                <th mat-header-cell *matHeaderCellDef>Project Start Date</th>
                                <td mat-cell *matCellDef="let element"> {{element.projectStartDate | date:'dd-MM-yyyy'}} </td>
                            </ng-container>
                            <ng-container matColumnDef="projectEndDate">
                                <th mat-header-cell *matHeaderCellDef>Project End Date</th>
                                <td mat-cell *matCellDef="let element"> {{element.projectEndDate | date:'dd-MM-yyyy'}}
                                      ({{calculateDateDifference(element.projectEndDate)}}) </td>
                            </ng-container>
                            <!-- <ng-container matColumnDef="designId">
                                <th mat-header-cell *matHeaderCellDef>Design Id</th>
                                <td mat-cell *matCellDef="let element"> {{element.designId}} </td>
                            </ng-container>
                            <ng-container matColumnDef="companyName">
                                <th mat-header-cell *matHeaderCellDef>Company Name</th>
                                <td mat-cell *matCellDef="let element"> {{element.companyName}} </td>
                            </ng-container> -->
                            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                        </table>
                    </div>
                    <mat-paginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons
                        aria-label="Select page of periodic elements">
                    </mat-paginator>
                </div>
            </div>
        </div>
    </div>
</div>

<ng-template #Content10 id="addtask" let-modal>
    <div class="modal-content">
        <div class="modal-header">
            <h6 class="modal-title" id="mail-ComposeLabel">Create Project</h6>
            <button type="button" class="btn-close" data-bs-dismiss="modal" (click)="modal.close('Cross click')"
                aria-label="Close"></button>
        </div>
        <div class="modal-body px-4">
            <form [formGroup]="createProjectForm" (ngSubmit)="onSubmit()">
                <div class="row">
                    <div class="col-xl-12">
                        <div class="card custom-card">
                            <!-- <div class="card-header">
                        <div class="card-title">Create Project</div>
                      </div> -->
                            <div class="card-body">
                                <div class="row gy-3">
                                    <div class="col-xl-4">
                                        <label for="projectName" class="form-label">Project Name:</label>
                                        <input type="text" class="form-control" id="projectName"
                                            formControlName="projectName" placeholder="Enter Project Name"
                                            [ngClass]="{ 'is-invalid': submitted && f['projectName'].errors }"
                                            maxlength="50">
                                        <div *ngIf="submitted && f['projectName'].errors" class="invalid-feedback">
                                            <div *ngIf="f['projectName'].errors['required']">Project name is required
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-xl-4">
                                        <label for="clientName" class="form-label">Client Name:</label>
                                        <input type="text" class="form-control" id="clientName"
                                            formControlName="clientName" placeholder="Enter Client Name"
                                            [ngClass]="{ 'is-invalid': submitted && f['clientName'].errors }"
                                            maxlength="50">
                                        <div *ngIf="submitted && f['clientName'].errors" class="invalid-feedback">
                                            <div *ngIf="f['clientName'].errors['required']">Client name is required
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-xl-4">
                                        <label for="businessCategory" class="form-label">Business Category:</label>
                                        <select class="form-select" aria-label="Default select example" formControlName='businessCategory'
                                            [ngClass]="{ 'is-invalid': submitted && f['businessCategory'].errors }">
                                            <option value="" disabled selected>select type</option>
                                            <option value="Commercial">Commercial</option>
                                            <option value="Residential">Residential</option>  
                                        </select>   
                                        <div *ngIf="submitted && f['businessCategory'].errors" class="invalid-feedback">
                                            <div *ngIf="f['businessCategory'].errors['required']">Business Category is
                                                required</div>
                                        </div>
                                        <!-- <input type="text" class="form-control" id="businessCategory"
                                            formControlName="businessCategory" placeholder="Business Category"
                                            [ngClass]="{ 'is-invalid': submitted && f['businessCategory'].errors }"
                                            maxlength="50">
                                        <div *ngIf="submitted && f['businessCategory'].errors" class="invalid-feedback">
                                            <div *ngIf="f['businessCategory'].errors['required']">Business Category is
                                                required</div>
                                        </div> -->
                                    </div>
                                    <div class="col-xl-4">
                                        <label for="projectAddress" class="form-label">Project Address:</label>
                                        <input type="text" class="form-control" id="projectAddress"
                                            formControlName="projectAddress" placeholder="Enter Project Address"
                                            [ngClass]="{ 'is-invalid': submitted && f['projectAddress'].errors }"
                                            maxlength="50">
                                        <div *ngIf="submitted && f['projectAddress'].errors" class="invalid-feedback">
                                            <div *ngIf="f['projectAddress'].errors['required']">Project Address is
                                                required</div>
                                        </div>
                                    </div>
                                    <div class="col-xl-4">
                                        <label for="state" class="form-label">State:</label>
                                        <input type="text" class="form-control" id="state" formControlName="state"
                                            placeholder="Enter State"
                                            [ngClass]="{ 'is-invalid': submitted && f['state'].errors }" maxlength="50">
                                        <div *ngIf="submitted && f['state'].errors" class="invalid-feedback">
                                            <div *ngIf="f['state'].errors['required']">State is required</div>
                                        </div>
                                    </div>
                                    <div class="col-xl-4">
                                        <label for="city" class="form-label">City:</label>
                                        <input type="text" class="form-control" id="city" formControlName="city"
                                            placeholder="Enter City"
                                            [ngClass]="{ 'is-invalid': submitted && f['city'].errors }" maxlength="50">
                                        <div *ngIf="submitted && f['city'].errors" class="invalid-feedback">
                                            <div *ngIf="f['city'].errors['required']">City is required</div>
                                        </div>
                                    </div>
                                    <!-- <div class="col-xl-4">
                                        <label for="projectState" class="form-label">Project Stage:</label>
                                        <input type="text" class="form-control" id="projectState"
                                            formControlName="projectState" placeholder="Enter Project State"
                                            [ngClass]="{ 'is-invalid': submitted && f['projectState'].errors }" maxlength="50"
                                            onkeypress="return ((event.charCode >= 48 && event.charCode <= 57) || event.charCode == 8)">
                                        <div *ngIf="submitted && f['projectState'].errors" class="invalid-feedback">
                                            <div *ngIf="f['projectState'].errors['required']">Project State is required
                                            </div>
                                        </div>
                                    </div> -->
                                    <div class="col-xl-4">
                                        <label for="projectEstimation" class="form-label">Project Estimation:</label>
                                        <input type="tel" class="form-control" id="projectEstimation" maxlength="10" 
                                            formControlName="projectEstimation" placeholder="Enter Estimation"
                                            [ngClass]="{ 'is-invalid': submitted && f['projectEstimation'].errors }"
                                            onkeypress="return ((event.charCode >= 48 && event.charCode <= 57) || event.charCode == 8)">
                                        <div *ngIf="submitted && f['projectEstimation'].errors" class="invalid-feedback">
                                            <div *ngIf="f['projectEstimation'].errors['required']">Project Estimation is required</div>
                                        </div>
                                    </div>
                                    <div class="col-xl-4">
                                        <label for="projectArea" class="form-label">Project Area (SFT):</label>
                                        <input type="tel" class="form-control" id="projectArea"
                                            formControlName="projectArea" placeholder="Enter Project Area"
                                            [ngClass]="{ 'is-invalid': submitted && f['projectArea'].errors }"
                                            maxlength="6">
                                        <div *ngIf="submitted && f['projectArea'].errors" class="invalid-feedback">
                                            <div *ngIf="f['projectArea'].errors['required']">Project Area is required</div>
                                        </div>
                                    </div>
                                    <!-- <div class="col-xl-4">
                                        <label for="action" class="form-label">Action:</label>
                                        <input type="text" class="form-control" id="action" formControlName="action"
                                            placeholder="Enter Action"
                                            [ngClass]="{ 'is-invalid': submitted && f['action'].errors }"
                                            maxlength="50">
                                        <div *ngIf="submitted && f['action'].errors" class="invalid-feedback">
                                            <div *ngIf="f['action'].errors['required']">Action is required</div>
                                        </div>
                                    </div> -->
                                    <!-- <div class="col-xl-4">
                            <label for="companyName" class="form-label">Company Name:</label>
                            <input type="text" class="form-control" id="companyName" formControlName="companyName" placeholder="Enter Company Name">
                          </div> -->
                                    <!-- <div class="col-xl-4"></div> -->
                                    <div class="col-xl-4">
                                        <!-- <mat-form-field appearance="fill">
                              <mat-label>Start Date</mat-label>
                              <input matInput [matDatepicker]="startPicker" formControlName="projectStartDate" placeholder="Choose Start Date">
                              <mat-datepicker-toggle matSuffix [for]="startPicker"></mat-datepicker-toggle>
                              <mat-datepicker #startPicker></mat-datepicker>
                            </mat-form-field> -->
                                        <label for="startDate" class="form-label">Start Date:</label>
                                        <input type="date" class="form-control" id='startDate'
                                            formControlName='projectStartDate'
                                            [ngClass]="{ 'is-invalid': submitted && f['projectStartDate'].errors }"
                                            maxlength="50">
                                        <div *ngIf="submitted && f['projectStartDate'].errors" class="invalid-feedback">
                                            <div *ngIf="f['projectStartDate'].errors['required']">Start Date is required
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-xl-4">
                                        <label for="endDate" class="form-label">End Date:</label>
                                        <input type="date" class="form-control" id='endDate'
                                            formControlName='projectEndDate'
                                            [ngClass]="{ 'is-invalid': submitted && f['projectEndDate'].errors }"
                                            maxlength="50">
                                        <div *ngIf="submitted && f['projectEndDate'].errors" class="invalid-feedback">
                                            <div *ngIf="f['projectEndDate'].errors['required']">End Date is required
                                            </div>
                                        </div>
                                        <!-- <mat-form-field appearance="fill">
                              <mat-label>End Date</mat-label>
                              <input matInput [matDatepicker]="endPicker" formControlName="projectEndDate" placeholder="Choose End Date">
                              <mat-datepicker-toggle matSuffix [for]="endPicker"></mat-datepicker-toggle>
                              <mat-datepicker #endPicker></mat-datepicker>
                            </mat-form-field> -->
                                    </div>

                                    <!-- <div class="col-xl-12">
                            <label class="form-label">Attachments</label>
                            <file-pond #myPond [options]="pondOptions" formControlName="attachments"></file-pond>
                          </div> -->
                                </div>
                            </div>
                            <!-- <div class="card-footer">
                        <button class="btn btn-primary-light btn-wave ms-auto float-end" type="submit">Create Project</button>
                      </div> -->
                        </div>
                    </div>
                </div>
            </form>
        </div>
        <div class="modal-footer">
            <button class="btn btn-primary-light btn-wave ms-auto float-end" type="submit" (click)="onSubmit()" [disabled]="btnDisable">
                Create Project</button>

            <button type="button" class="btn btn-light" data-bs-dismiss="modal"
                (click)="modal.close('Cross click')">Cancel</button>
            <!-- <button type="button" class="btn btn-primary">Create</button> -->
        </div>
    </div>
</ng-template>
<!-- End:: row-3 -->
<!-- Start Row-4 -->
<ng-template #Content11 id="addtask" let-modal>
    <div class="modal-content">
        <div class="modal-header">
            <h6 class="modal-title" id="mail-ComposeLabel">project details</h6>
            <button type="button" class="btn-close" data-bs-dismiss="modal" (click)="modal.close('Cross click')"
                aria-label="Close"></button>
        </div>
        <div class="modal-body px-4">
            <div class="row">
                <div class="col-xl-12">
                    <div class="card custom-card">
                        <!-- <div class="card-header">
                    <div class="card-title">Create Project</div>
                    </div> -->
                        <div class="card-body">
                            <div class="row gy-3">
                                <div class="col-xl-4">
                                    <label for="projectName" class="form-label">Project Name</label>
                                    <input type="text" class="form-control" id="projectName" [(ngModel)]="projectName" [disabled]="true">
                                </div>
                                <div class="col-xl-4">
                                    <label for="clientName" class="form-label">Client Name</label>
                                    <input type="text" class="form-control" id="clientName" [(ngModel)]="clientName" [disabled]="true">
                                </div>
                                <div class="col-xl-4">
                                    <label for="businessCategory" class="form-label">Business Category:</label>
                                    <!-- <ng-select class="ti-form-select !rounded-s-none" [(ngModel)]='businessCategory'
                                        name="choices-multiple-remove-button" id="businessCategory" [multiple]="true">
                                        <ng-option value="Choice 1" selected>Commercial</ng-option>
                                        <ng-option value="Choice 2">Residential</ng-option>
                                    </ng-select> -->
                                    <select class="form-select" aria-label="Default select example"  [(ngModel)]='businessCategory' [disabled]="true">
                                        <option value="">select type</option>
                                        <option value="Commercial">Commercial</option>
                                        <option value="Residential">Residential</option>  
                                    </select>
                                    
                                    <!-- <input type="text" class="form-control" id="businessCategory" formControlName="businessCategory" placeholder=""> -->
                                </div>
                                <div class="col-xl-4">
                                    <label for="projectAddress" class="form-label">Project Address:</label>
                                    <input type="text" class="form-control" id="projectAddress" [(ngModel)]="projectAddress" [disabled]="true">
                                </div>
                                <div class="col-xl-4">
                                    <label for="state" class="form-label">State:</label>
                                    <input type="text" class="form-control" id="state" [(ngModel)]="state" [disabled]="true">
                                </div>
                                <div class="col-xl-4">
                                    <label for="city" class="form-label">City:</label>
                                    <input type="text" class="form-control" id="city" [(ngModel)]="city" [disabled]="true">
                                </div>
                                <div class="col-xl-4">
                                    <label for="projectArea" class="form-label">Project Area:</label>
                                    <input type="number" class="form-control" id="projectArea" [(ngModel)]="projectArea" [disabled]="true">
                                </div>
                                <div class="col-xl-4">
                                    <label for="action" class="form-label">Action:</label>
                                    <input type="text" class="form-control" id="action" [(ngModel)]="action" [disabled]="true">
                                </div>
                                <div class="col-xl-4">
                                    <label for="designId" class="form-label">Design Id</label>
                                    <input type="text" class="form-control" id="designId" [(ngModel)]="designId" [disabled]="true">
                                </div>
                                <div class="col-xl-4">
                                    <label for="companyName" class="form-label">Company Name:</label>
                                    <input type="text" class="form-control" id="companyName" [(ngModel)]="companyName" [disabled]="true">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-light" data-bs-dismiss="modal"
                (click)="modal.close('Cross click')">Cancel</button>
        </div>
    </div>
</ng-template>
<!-- End row-4 -->
<!-- Start Row 5 -->
<ng-template #Content12 id="addtask" let-modal>
    <div class="modal-content">
        <div class="modal-header">
            <h6 class="modal-title" id="mail-ComposeLabel">Project Estimation</h6>
            <button type="button" class="btn-close" data-bs-dismiss="modal" (click)="modal.close('Cross click')"
                aria-label="Close"></button>
        </div>
        <div class="modal-body px-4">
            <table class="table table-bordered">
                <thead>
                  <tr>
                    <th>Stage of Payment</th>
                    <th>Percentage</th>
                    <th>Amount to be Recieved</th>
                    <th>Received Amount</th>
                    <th>Pending Amount</th>
                    <th>Updated By</th>
                    <th>Updated Date</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let payment of paymentStages; let i=index">
                    <td  style="width:15%">
                      <input type="text" class="form-control form-control-sm" [(ngModel)]="payment.paymentStage" 
                        placeholder="Enter Stage" [disabled]="!payment.isNew" (ngModelChange)="validateField(i, 'paymentStage')">
                    </td>
                    <td style="width:10%">
                      <input type="text" class="form-control form-control-sm" [(ngModel)]="payment.percantage" placeholder="Enter Percentage"
                        [disabled]="!payment.paymentStage || !payment.isNew" (ngModelChange)="calculateAmountToBeReceived(payment); validateField(i, 'percantage')">
                    </td>
                    <td  style="width:15%">
                        <input type="text" class="form-control form-control-sm" [(ngModel)]="payment.amountToBeRecieved" placeholder="Enter Amount"
                          [disabled]="true">
                    </td>
                    <td style="width:15%">
                      <input type="text" class="form-control form-control-sm" [(ngModel)]="payment.receivedAmount" placeholder="Enter Received Amount"
                        [disabled]="!payment.amountToBeRecieved || !payment.percantage || !payment.paymentStage || !payment.isNew" (ngModelChange)="calculatePendingAmount(payment)">
                    </td>
                    <td  style="width:15%">
                      <input type="text" class="form-control form-control-sm" [(ngModel)]="payment.pendingAmount" placeholder="Enter Pending Amount"
                        [disabled]="true" (ngModelChange)="validateField(i, 'pendingAmount')">
                    </td>
                    <td>
                        <input type="text" class="form-control form-control-sm" [(ngModel)]="payment.updatedBy" [disabled]="true">
                    </td>
                    <td>
                        <input type="text" class="form-control form-control-sm" [disabled]="true" 
                        [value]="payment.updatedTime ? (payment.updatedTime | date:'dd-MM-yyyy hh:mm a') : ''">
                    </td>
                  </tr>
                </tbody>
              </table>
            <button class="btn btn-success" (click)="addRow()" [disabled]='isPercentageLimitReached()'>Add Row</button>
            <div class="row gy-4 justify-content-center">
                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-3">
                    <p class="mb-2 text-muted">Project Estimation</p>
                    <input type="text" class="form-control" id="input" [(ngModel)]="estamount" [disabled]="true">
                </div>
                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-3">
                    <p class="mb-2 text-muted">Total Amount to be Received</p>
                    <input type="text" class="form-control" id="input" [(ngModel)]="ttlAmtToBeRcvd" [disabled]="true">
                </div>
                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-3">
                    <p class="mb-2 text-muted">Total amount Received</p>
                    <input type="text" class="form-control" id="input" [(ngModel)]="totalReceivedAmount" [disabled]="true">
                </div>
                <div class="col-xl-3 col-lg-3 col-md-3 col-sm-3">
                    <p class="mb-2 text-muted">Total Pending amount</p>
                    <input type="text" class="form-control" id="input" [(ngModel)]="lastPendingAmount" [disabled]="true">
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button type="submit" class="btn btn-success" (click)="savePaymentDetails()">Submit</button>
            <button type="button" class="btn btn-light" data-bs-dismiss="modal"
                (click)="modal.close('Cross click')">Cancel</button>
        </div>
    </div>
</ng-template>
<!-- End Row 5 -->
 